<!DOCTYPE html>
<html lang="pt-BR">
<head>
   <meta charset="utf-8">
   <meta name="viewport" content="width=device-width, initial-scale=1">

   <!-- Link para o Tailwind CSS -->
   <script src="https://cdn.tailwindcss.com"></script>

   <title>Atualizar dados</title>
</head>
<body class="bg-gray-100 text-gray-800">

  <!-- Cabeçalho -->
  <nav class="bg-purple-700 p-4 shadow-lg">
    <div class="container mx-auto flex justify-between items-center">
      <a class="text-white text-lg font-semibold" href="{{ url_for('index') }}">LanguaHouse</a>
      <a class="text-white text-lg" href="{{ url_for('login') }}">Login</a>
    </div>
  </nav>

  <!-- Conteúdo principal -->
  <div class="container mx-auto p-6">
    <h1 class="text-3xl font-semibold text-purple-700 mb-6">Atualizar Perfil</h1>

    <!-- Exibe erro se a senha atual estiver incorreta -->
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, message in messages %}
          <div class="alert alert-{{ 'danger' if category == 'error' else 'success' }} mb-4">
            {{ message }}
          </div>
        {% endfor %}
      {% endif %}
    {% endwith %}

    <!-- Formulário de atualização -->
    <form method="POST" action="{{ url_for('update', id=usuario['cod_usuario']) }}" class="bg-white p-6 rounded-lg shadow-lg space-y-4">
      
      <!-- Nome -->
      <div>
        <label for="nome" class="block text-lg font-semibold text-gray-700">Nome:</label>
        <input type="text" id="nome" name="nome" value="{{ usuario['nome'] }}" required class="mt-2 p-2 w-full border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
      </div>

      <!-- E-mail -->
      <div>
        <label for="email" class="block text-lg font-semibold text-gray-700">E-mail:</label>
        <input type="email" id="email" name="email" value="{{ usuario['email'] }}" required class="mt-2 p-2 w-full border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
      </div>

      <!-- Data de Nascimento -->
      <div>
        <label for="data_nasc" class="block text-lg font-semibold text-gray-700">Data de Nascimento:</label>
        <input type="date" id="data_nasc" name="data_nasc" value="{{ usuario['data_nasc'] }}" required class="mt-2 p-2 w-full border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
      </div>

      <!-- Senha Atual -->
      <div>
        <label for="senha_atual" class="block text-lg font-semibold text-gray-700">Senha Atual:</label>
        <input type="password" id="senha_atual" name="senha_atual" required class="mt-2 p-2 w-full border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
      </div>

      <!-- Nova Senha -->
      <div>
        <label for="nova_senha" class="block text-lg font-semibold text-gray-700">Nova Senha (deixe em branco para não alterar):</label>
        <input type="password" id="nova_senha" name="nova_senha" class="mt-2 p-2 w-full border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
      </div>

      <!-- Cidade -->
      <div>
        <label for="cidade" class="block text-lg font-semibold text-gray-700">Cidade:</label>
        <input type="text" id="cidade" name="cidade" value="{{ usuario['cidade'] }}" required class="mt-2 p-2 w-full border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
      </div>

      <!-- Estado -->
      <div>
        <label for="estado" class="block text-lg font-semibold text-gray-700">Estado:</label>
        <input type="text" id="estado" name="estado" value="{{ usuario['estado'] }}" required class="mt-2 p-2 w-full border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
      </div>

      <!-- Botão de atualização -->
      <div>
        <button type="submit" class="w-full py-2 bg-purple-700 text-white rounded-md hover:bg-purple-800 transition-all duration-300">Atualizar</button>
      </div>
    </form>

    <!-- Link para voltar ao perfil -->
    <div class="mt-4">
      <a href="{{ url_for('perfil') }}" class="text-purple-700 hover:text-purple-900">Voltar ao Perfil</a>
    </div>
  </div>

</body>
</html>
